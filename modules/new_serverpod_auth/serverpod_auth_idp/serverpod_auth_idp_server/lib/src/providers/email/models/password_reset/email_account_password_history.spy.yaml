### Password history entry for an email account.
###
### This model stores previously used passwords to prevent users from reusing
### them when resetting their password.
class: EmailAccountPasswordHistory
serverOnly: true
table: serverpod_auth_idp_email_account_password_history
fields:
  id: UuidValue?, defaultPersist=random_v7

  ### Email account this password history entry belongs to
  emailAccount: EmailAccount?, relation(onDelete=Cascade)

  ### The hashed password that was previously used.
  ###
  ### Obtained in conjunction with [passwordSalt].
  passwordHash: ByteData

  ### The salt used for creating the [passwordHash].
  passwordSalt: ByteData

  ### The time when this password was set.
  createdAt: DateTime, defaultModel=now

indexes:
  serverpod_auth_idp_email_account_password_history_account:
    fields: emailAccountId
  serverpod_auth_idp_email_account_password_history_created_at:
    fields: createdAt

